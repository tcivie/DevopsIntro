trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: NodeTool@0
  inputs:
    versionSpec: '14.x'
  displayName: 'Install Node.js'

- script: |
    npm install
    npm run lint
    npm test
  displayName: 'Install dependencies, run lint and tests'

- task: AzureRmWebAppDeployment@4
  inputs:
    ConnectionType: 'AzureRM'
    azureSubscription: '<YOUR_AZURE_SERVICE_CONNECTION>'
    appType: 'webApp'
    WebAppName: '<YOUR_AZURE_APP_SERVICE_NAME>'
    packageForLinux: '$(Build.ArtifactStagingDirectory)/**/*.zip'
    RuntimeStack: 'NODE|14-lts'
  displayName: 'Deploy to Azure App Service'
